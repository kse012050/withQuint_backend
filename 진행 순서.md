1. git init 으로 node 세팅
2. npm i dotenv express morgan multer mysql2 bcrypt 설치
3. npm 1 -D nodemon 설치
4. "start": "nodemon app.js", 입력
5. app.js 세팅 
~~~js 
const express = require('express');
const morgan = require('morgan');
const dotenv = require('dotenv');

const app = express();

dotenv.config();

app.set('port', process.env.PORT || 8001);  
app.use(morgan('dev'));
app.use(express.json());
app.use(express.urlencoded({ extended: false }));

app.get('/user', (req, res, next)=>{
    console.log(req);
    console.log(res);
})

app.use((req, res, next)=>{
    const error = new Error(`${req.method} ${req.url} 라우터가 없습니다.`)
    error.status = 404;
    next(error);
})


app.listen(app.get('port'), () => {
    console.log(app.get('port'), '번 포트에서 대기 중');
})
~~~
6. mySQL schemas 생성
~~~mysql
CREATE DATABASE withquint
~~~
7. mySQL user 테이블 생성
~~~mysql
create table `users` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `userId` varchar(10) NOT NULL UNIQUE,
 `password` varchar(60) NOT NULL,
 `nickname` varchar(20) NOT NULL UNIQUE,
 `mobile` int(11) NOT NULL UNIQUE,
 `termsOfService` CHAR(1) NOT NULL CHECK (termsOfService = 'y'),
 `privacyPolicy` CHAR(1) NOT NULL CHECK (privacyPolicy = 'y'),
 `created` datetime NOT NULL,
 PRIMARY KEY (`id`)
);
~~~

8. 회원가입, 로그인 기능 간단하게 만들었다
9. vipProduct 생성
~~~
CREATE TABLE vipProducts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(10) NOT NULL,
    price INT NOT NULL,
    description TEXT
);
~~~

## 게시물 생성
~~~
CREATE TABLE `boards` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `boardType` ENUM('recommendation', 'revenue', 'stock', 'vip', 'counsel', 'notice') NOT NULL,
    `type` ENUM('free', 'vip'),
    `title` VARCHAR(50) NOT NULL,
    `content` TEXT NOT NULL,
    `author` VARCHAR(10) NOT NULL,
    `created` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    `new` BOOLEAN NOT NULL DEFAULT TRUE,
    PRIMARY KEY (`id`),
    CONSTRAINT chk_type_required 
    CHECK (
        (boardType IN ('recommendation', 'revenue') AND type IN ('free', 'vip')) OR
        (boardType NOT IN ('recommendation', 'revenue') AND type IS NULL)
    )
);
~~~

new 하루 설정
~~~
DELIMITER //

CREATE TRIGGER before_boards_insert
BEFORE INSERT ON boards
FOR EACH ROW
BEGIN
    IF NEW.created < NOW() - INTERVAL 1 DAY THEN
        SET NEW.new = FALSE;
    ELSE
        SET NEW.new = TRUE;
    END IF;
END;
//

DELIMITER ;

~~~

new 1분 설정
~~~
DELIMITER //

CREATE TRIGGER before_boards_insert
BEFORE INSERT ON boards
FOR EACH ROW
BEGIN
    -- created가 현재 시간 기준 1분 이내이면 new = TRUE, 아니면 FALSE
    IF NEW.created < NOW() - INTERVAL 1 MINUTE THEN
        SET NEW.new = FALSE;
    ELSE
        SET NEW.new = TRUE;
    END IF;
END;
//

DELIMITER ;
~~~

1분으로 변경
~~~
UPDATE boards 
SET new = IF(created >= NOW() - INTERVAL 1 MINUTE, TRUE, FALSE);
~~~

현재 1분으로 설정되어있따!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


## 출력할 때 넘버링
~~~
SELECT 
    ROW_NUMBER() OVER (ORDER BY created_at DESC) AS row_num, 
    id, 
    title, 
    author 
FROM posts;
~~~